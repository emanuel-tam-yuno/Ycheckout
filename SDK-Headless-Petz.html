<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yuno Headless SDK Integration</title>
</head>
<body>

    <h1>Exemplo de Integração com o Headless SDK da Yuno</h1>

    <p>Verifique o console para o resultado do OTT gerado ou mensagens de erro.</p>

    <!-- Incluindo o script do Yuno SDK -->
    <script src="https://sdk-web.y.uno/v1/static/js/main.min.js"></script>

    <script>
        // Inicialize o SDK Yuno com a PUBLIC_API_KEY
        const yuno = Yuno.initialize("sandbox_gAAAAABml9agfjCn_2CN4cupZXq55lLY_NwObLEMWooajMoDb7R-i-Z-x6qeTEEgGkzkOsHbay-BUsnI0-ayzKnDhcaG_G6qS1W7KXoqB-pG5nQddJ3WFi0Ctwhc02lCF0c7du1LpNuWL1FOhUitacFp5AO4JkgiYV6uuROwB6nrlx8n1b1Pjy45QK_6vLgQKeJdpJgUVCcsRgDz57vFKRVQgLwsIBqXIdsGRFIOuY4jBM-wMdRozMYSHBZvgwVMAQDgbStMiBig");

        // Configure a sessão de pagamento com o país e a checkout_session adequados
        const apiClientPayment = yuno.apiClientPayment({
            country_code: "BR",
            checkout_session: "70deb5ab-6901-4875-8b72-723bffce3a28" // Sessão de checkout válida.
        });

        // Função para gerar o One-Time Token (OTT)
        (async function generateOTT() {
            try {
                // Gere o OTT usando os dados do cartão
                const oneTimeToken = await apiClientPayment.generateToken({
                    checkout_session: "0bb7fa28-2fc8-4364-9d09-afa3a3d65e4c",
                    payment_method: {
                        type: "CARD",
                        vaulted_token: 'bcc57c68-a2d6-45b0-94ad-81f53d799c0c', 
                        card: {
                            detail: {
                                type: "CREDIT", // Pode ser "CREDIT" ou "DEBIT"
                                security_code: null
                            }
                        },
                        customer: {
                            // Informações do cliente
                            name: "Andrea B",
                            email: "andreab@example.com",
                        },
                    }
                });

                // Exibir o OTT no console
                console.log("OTT gerado com sucesso:", oneTimeToken);

            } catch (error) {
                // Captura e exibe os erros no console
                console.error("Erro ao gerar o OTT:", error);
            }
        })();
    </script>

</body>
</html>
